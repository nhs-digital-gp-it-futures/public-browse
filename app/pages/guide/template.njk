{% extends 'includes/layout.njk' %}
{% from 'components/back-link/macro.njk' import backLink %}
{% from 'components/view-section-heading/macro.njk' import viewSectionHeading %}
{% from './components/subsection.njk' import subsection %}

{% block body %}
  <div class="nhsuk-grid-row nhsuk-width-container nhsuk-u-margin-bottom-8" data-test-id="guide-page-body">
      <div class="nhsuk-u-padding-top-5" data-test-id="go-back-link">
      {{ backLink({
        "href": "/",
        "text": "Go back to homepage"
      }) }}
    </div>
    <h1 class="nhsuk-u-margin-top-6 nhsuk-u-margin-bottom-4" data-test-id="guide-page-title">{{ title }}</h1>
    <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-two-thirds">
        <div class="nhsuk-u-font-size-24" data-test-id="guide-page-description">{{ description }}</div>
        <div class="nhsuk-u-font-size-19" data-test-id="guide-page-subtext">
          {{ subsection({
            subSection: {
              description: subtext
            }
          }) }}
        </div>
      </div>
    </div>
    {% for section in sections %}
    <div id="{{ section.id }}" class="nhsuk-grid-row" data-test-id="guide-section-{{section.id}}">

        <div class='bc-c-title-block nhsuk-grid-column-full nhsuk-u-margin-left-3'>
          {{ viewSectionHeading({
            text: section.title,
            dataTestId: "guide-section-title"
          }) }}
        </div>

        <div class="nhsuk-grid-column-two-thirds nhsuk-u-font-size-19 nhsuk-u-margin-left-5" data-test-id="guide-section-subsection">
          {% for subSection in section.subsections %}
            {{ subsection({
              subSection: subSection,
              blobstoreHost: config.blobstoreHost
            }) }}
          {% endfor %}
        </div>

    </div>
    {% endfor %}
  </div>
{% endblock %}
